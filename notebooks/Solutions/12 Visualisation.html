
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>12. Visualisation &#8212; Python Tutorial</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="11. Pandas" href="11%20Pandas.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Python Tutorial</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../Welcome.html">
   Welcome
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tutorial
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../1%20Variables_and_data_types.html">
   1. Variables and data types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../2%20Operators.html">
   2. Operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../3%20Working_with_strings.html">
   3. Working with strings
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../4%20Flow_control.html">
   4. Flow control
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../5%20Lists.html">
   5. Lists
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../6%20Dictionaries.html">
   6. Dictionaries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../7%20Functions_modules_and_libraries.html">
   7. Functions, Modules and Libraries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../8%20Working_with_files_and_folders.html">
   8. Working with files and folders
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../9%20Regular_expressions.html">
   9. Regular Expressions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../10%20Data_acquisition.html">
   10. Data acquisition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../11%20Pandas.html">
   11. Data analysis with pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../12%20Visualisation.html">
   12. Data Visualisation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Practical information
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Jupyter_notebook_basics.html">
   Jupyter Notebook basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Installation.html">
   Installation guidelines
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Other_resources.html">
   Other resources
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Solutions to the exercises
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="1%20Variables_and_data_types.html">
   1. Variables and data types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2%20Operators.html">
   2. Operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3%20Working_with_strings.html">
   3. Working with strings
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="4%20Flow_control.html">
   4. Flow control
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5%20Lists.html">
   5. Lists
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6%20Dictionaries.html">
   6. Dictionaries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="7%20Functions_modules_and_libraries.html">
   7. Functions, Modules and Libraries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="8%20Working_with_files_and_folders.html">
   8. Working with files and folders
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="9%20Regular_expressions.html">
   9. Regular expressions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10%20Data_acquisition.html">
   10. Data acquisition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11%20Pandas.html">
   11. Pandas
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   12. Visualisation
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/notebooks/Solutions/12 Visualisation.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/cdsleiden/python-tutorial/gh-pages?urlpath=tree/docs/notebooks/Solutions/12 Visualisation.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-12-1">
   Exercise 12.1
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-12-2">
   Exercise 12.2
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-12-3">
   Exercise 12.3
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-12-4">
   Exercise 12.4
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="visualisation">
<h1>12. Visualisation<a class="headerlink" href="#visualisation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="exercise-12-1">
<h2>Exercise 12.1<a class="headerlink" href="#exercise-12-1" title="Permalink to this headline">¶</a></h2>
<p>In exercise 11.3, you created a CSV file named ‘prices_of_coffee_over_time.csv’, containing data about the average price of a pound of coffee on a range of dates. Use this CSV file to create a line chart which visualises the development of these prices over time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;prices_of_coffee_over_time.csv&#39;</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;ggplot&#39;</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;price_per_pound&#39;</span><span class="p">]</span> <span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;#930d08&#39;</span> <span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;solid&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Price per pound&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span> <span class="mi">90</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span> <span class="s1">&#39;VOC Coffee auctions&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-12-2">
<h2>Exercise 12.2<a class="headerlink" href="#exercise-12-2" title="Permalink to this headline">¶</a></h2>
<p>Download the following data set:</p>
<p><a class="reference external" href="https://edu.nl/bcm4x">https://edu.nl/bcm4x</a></p>
<p>This file contains data collected for the <a class="reference external" href="https://stats.oecd.org/index.aspx?DataSetCode=BLI">2018 Better Life Index</a>, which was created by the OECD to visuale some of the key factors  that contribute to well-being in OECD countries, including education, income, housing and environment.</p>
<p>Using this data set, create a bar chart which can be used to compare either the ‘personal_earnings’ or the ‘life_satisfaction’ in OECD countries.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;bli.csv&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;personal_earnings&#39;</span> <span class="p">])</span>


<span class="n">colours</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;#DD7373&#39;</span> <span class="p">,</span> <span class="s1">&#39;#3B3561&#39;</span> <span class="p">,</span> <span class="s1">&#39;#EAD94C&#39;</span> <span class="p">,</span> <span class="s1">&#39;#9E1946&#39;</span> <span class="p">,</span> <span class="s1">&#39;#c9c4b5&#39;</span>  <span class="p">]</span>
<span class="n">classColours</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="n">unique_categories</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span> <span class="nb">set</span><span class="p">(</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;continent&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span> <span class="n">unique_categories</span> <span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colours</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">unique_categories</span> <span class="p">)</span> <span class="p">):</span>
        <span class="n">classColours</span><span class="p">[</span> <span class="n">unique_categories</span><span class="p">[</span><span class="n">u</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="n">colours</span><span class="p">[</span><span class="n">u</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You have more than </span><span class="si">{}</span><span class="s2"> categories. You need to add colours to the list!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span><span class="n">colours</span><span class="p">)</span> <span class="p">))</span>

<span class="n">colours</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;continent&#39;</span><span class="p">]:</span>
    <span class="n">colours</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">classColours</span><span class="p">[</span><span class="n">category</span><span class="p">]</span> <span class="p">)</span>
    

<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">mpatches</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">y_axis</span> <span class="o">=</span> <span class="s1">&#39;personal_earnings&#39;</span>


<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span> <span class="mi">14</span> <span class="p">,</span> <span class="mi">10</span> <span class="p">)</span> <span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>


<span class="n">bar_width</span> <span class="o">=</span> <span class="mf">0.45</span>
<span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.8</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="n">y_axis</span><span class="p">]</span> <span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">bar_width</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="n">opacity</span> <span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">colours</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span> <span class="mi">90</span><span class="p">)</span>


<span class="n">patchList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">classColours</span><span class="p">:</span>
    <span class="n">data_key</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">classColours</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
    <span class="n">patchList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_key</span><span class="p">)</span>
    
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="n">patchList</span> <span class="p">,</span> <span class="n">shadow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s1">&#39;large&#39;</span> <span class="p">,</span> <span class="n">frameon</span> <span class="o">=</span> <span class="kc">True</span> <span class="p">)</span>
<span class="c1">#plt.ylim(0, 10)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Countries&#39;</span> <span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span> <span class="n">y_axis</span> <span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span> <span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span> <span class="n">y_axis</span> <span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span> <span class="p">)</span>


<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Using seaborn, the bar chart can be created as follows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">colours</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;#DD7373&#39;</span> <span class="p">,</span> <span class="s1">&#39;#c9c4b5&#39;</span> <span class="p">,</span> <span class="s1">&#39;#3B3561&#39;</span> <span class="p">,</span> <span class="s1">&#39;#EAD94C&#39;</span> <span class="p">,</span> <span class="s1">&#39;#9E1946&#39;</span>  <span class="p">,</span> <span class="s1">&#39;#51A3A3&#39;</span>  <span class="p">]</span>

<span class="c1">## and also adds spacing in between the lines of the legend </span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;whitegrid&#39;</span><span class="p">,</span> <span class="n">rc</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;legend.labelspacing&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>


<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;bli.csv&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;personal_earnings&#39;</span> <span class="p">])</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span> <span class="mi">14</span> <span class="p">,</span> <span class="mi">10</span> <span class="p">)</span> <span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span> <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;country&#39;</span> <span class="p">,</span> <span class="n">y</span><span class="o">=</span> <span class="s1">&#39;personal_earnings&#39;</span> <span class="p">,</span> <span class="n">data</span> <span class="o">=</span>  <span class="n">df</span> <span class="p">,</span> <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;continent&#39;</span> <span class="p">,</span> <span class="n">dodge</span><span class="o">=</span><span class="kc">False</span> <span class="p">,</span> <span class="n">palette</span> <span class="o">=</span> <span class="n">colours</span> <span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span> <span class="mi">90</span><span class="p">)</span>

<span class="c1"># this next line makes sure that the legend is shown outside of the graph</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">borderaxespad</span><span class="o">=</span><span class="mf">0.</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-12-3">
<h2>Exercise 12.3<a class="headerlink" href="#exercise-12-3" title="Permalink to this headline">¶</a></h2>
<p>Using the CSV file that you have downloaded for exercise in 12.2 to create a scatter plot. The X-axis must visualise the values in the column ‘self-reported_health’, and the Y-axis must show the ‘employment_rate’. The size of the points must represent the ‘educational_attainment’ and the colour of the points ust indicate the ‘air_pollution’.</p>
<p>N.B. Names of exiting colour palettes can be found at <a class="reference external" href="https://python-graph-gallery.com/101-make-a-color-palette-with-seaborn/">https://python-graph-gallery.com/101-make-a-color-palette-with-seaborn/</a> or at <a class="reference external" href="https://chrisalbon.com/python/data_visualization/seaborn_color_palettes/">https://chrisalbon.com/python/data_visualization/seaborn_color_palettes/</a>. Examples include: “Blues”, “BuGn”, “YlOrRd”, “GnBu”, “OrRd”, “Greens”, “Reds”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;bli.csv&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;seaborn-whitegrid&#39;</span><span class="p">)</span>

<span class="n">x_axis</span> <span class="o">=</span> <span class="s1">&#39;self-reported_health&#39;</span>
<span class="n">y_axis</span> <span class="o">=</span>  <span class="s1">&#39;employment_rate&#39;</span>
<span class="n">point_size</span> <span class="o">=</span>  <span class="s1">&#39;educational_attainment&#39;</span>
<span class="n">point_colour</span> <span class="o">=</span>  <span class="s1">&#39;air_pollution&#39;</span>


<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span> <span class="o">=</span> <span class="p">[</span><span class="n">x_axis</span><span class="p">,</span> <span class="n">y_axis</span><span class="p">])</span>

<span class="c1">#air_pollution,water_quality</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">10</span><span class="p">,</span><span class="mi">10</span> <span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>


<span class="n">scatter</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span> <span class="n">df</span><span class="p">[</span><span class="n">x_axis</span><span class="p">]</span> <span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="n">y_axis</span><span class="p">]</span> <span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>  <span class="n">s</span><span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">point_size</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span>  <span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">point_colour</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Reds&#39;</span> <span class="p">)</span>


<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span> <span class="n">row</span><span class="p">[</span><span class="n">x_axis</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="n">y_axis</span><span class="p">]</span> <span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mf">12.8</span><span class="p">)</span>
    

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span> <span class="n">x_axis</span>  <span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span> <span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span> <span class="n">y_axis</span>  <span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span> <span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span> <span class="s1">&#39;OECD Better Life Index&#39;</span> <span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">24</span> <span class="p">)</span>


<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Using seaborn:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;bli.csv&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span> <span class="o">=</span> <span class="p">[</span><span class="n">x_axis</span><span class="p">,</span> <span class="n">y_axis</span><span class="p">])</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">10</span><span class="p">,</span><span class="mi">10</span> <span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;seaborn-whitegrid&#39;</span><span class="p">)</span>

<span class="n">x_axis</span> <span class="o">=</span> <span class="s1">&#39;self-reported_health&#39;</span>
<span class="n">y_axis</span> <span class="o">=</span>  <span class="s1">&#39;employment_rate&#39;</span>
<span class="n">point_size</span> <span class="o">=</span>  <span class="s1">&#39;educational_attainment&#39;</span>
<span class="n">point_colour</span> <span class="o">=</span> <span class="s1">&#39;air_pollution&#39;</span> 

<span class="c1">## and also adds spacing in between the lines of the legend </span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;whitegrid&#39;</span><span class="p">,</span> <span class="n">rc</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;legend.labelspacing&#39;</span><span class="p">:</span> <span class="mf">1.6</span><span class="p">})</span>


<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">x_axis</span> <span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y_axis</span>  <span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span> <span class="n">point_colour</span> <span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;Greens&quot;</span> <span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">point_size</span> <span class="p">,</span> <span class="n">sizes</span><span class="o">=</span><span class="p">(</span> <span class="mi">100</span> <span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="p">)</span>

<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span> <span class="n">row</span><span class="p">[</span><span class="n">x_axis</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="n">y_axis</span><span class="p">]</span> <span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mf">12.8</span><span class="p">)</span>


<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span> <span class="s1">&#39;Self reported health&#39;</span>  <span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span> <span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span> <span class="s1">&#39;Employment rate&#39;</span>  <span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span> <span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span> <span class="s1">&#39;OECD Better Life Index&#39;</span> <span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">24</span> <span class="p">)</span>



<span class="c1"># this next line makes sure that the legend is shown outside of the graph</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">borderaxespad</span><span class="o">=</span><span class="mf">0.</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-12-4">
<h2>Exercise 12.4<a class="headerlink" href="#exercise-12-4" title="Permalink to this headline">¶</a></h2>
<p>PISA is the OECD’s <a class="reference external" href="https://www.oecd.org/pisa/">Programme for International Student Assessment</a>. This programme evaluates educational systems globally by measuring the performance of 15 year-old-children in mathematics, science and reading. The latest study is from 2018.</p>
<p>The CSV file ‘<a class="reference external" href="https://edu.nl/p97ma">pisa.csv</a>’ contains all the scores measured for mathematics and reading in between 2000 and 2018.</p>
<p>Using Pandas, Matplotlib and Seaborn, create visualisations which can help to answer the following questions:</p>
<ol class="simple">
<li><p>How did the various countries that were examined in 2018 perform? Which contries had the highest scores, and which countries had the lowest scores? How did the score of the Netherlands compare to those of other countries? You can limit the analyses to the the ‘total’ scores (i.e. those records in which column ‘object’ has value ‘TOT’).</p></li>
<li><p>Were the scores for reading correlated to the scores for mathematics in 2018? Answer this question by creating a scatter plot.</p></li>
<li><p>How did the scores for reading develop in the Netherlands in between 2000 and 2018? Focus on the score for boys and for girls separately.</p></li>
<li><p>Have the scores remained relatively stable over the years if we look at the total scores? Or has there been some variation? How does the variation of the scores for the Netherlands compare to the scores in France, Germany, Belgium and Luxembourg? Try to answer this question by crearing a boxplot.</p></li>
</ol>
<p>Firstly, download the CSV file and read its contents using <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> method from pandas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;pisa.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Next, create a new data frame containing the total scores measured in the year 2018. We can ‘subset’ the dataframe using square brackets. These brackets should contain a criterium that can serve as a filter.</p>
<p>the <code class="docutils literal notranslate"><span class="pre">sort_values()</span></code> method can be used to place all the rows oif the data frame in a certain order.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_2018</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;subject&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;TOT&#39;</span> <span class="p">]</span>
<span class="n">df_2018</span> <span class="o">=</span> <span class="n">df_2018</span><span class="p">[</span> <span class="n">df_2018</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2018</span> <span class="p">]</span>

<span class="n">df_2018</span> <span class="o">=</span> <span class="n">df_2018</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;pisa_read&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Next, we can plot the values in this new data frame using <code class="docutils literal notranslate"><span class="pre">Seaborn</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s1">&#39;darkgrid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">10</span><span class="p">,</span><span class="mi">7</span> <span class="p">))</span>

<span class="c1"># The parameter &#39;x&#39; specifies the values that will </span>
<span class="c1"># be shown on the X-axis</span>
<span class="c1"># The parameter &#39;y&#39; specifies the values that will </span>
<span class="c1"># be shown on the Y-axis</span>
<span class="c1">## &#39;hue&#39; determines the colours of the bars. It can be </span>
<span class="c1"># connected to one of the variables in the</span>
<span class="c1"># data frame</span>


<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="n">df_2018</span> <span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;location_name&#39;</span> <span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;pisa_read&#39;</span> <span class="p">,</span> <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;continent&#39;</span> <span class="p">,</span> <span class="n">dodge</span> <span class="o">=</span> <span class="kc">False</span>  <span class="p">,</span> <span class="n">ci</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">borderaxespad</span><span class="o">=</span><span class="mf">0.</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mi">90</span> <span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> 
</pre></div>
</div>
</div>
</div>
<p>To examine the correlation between <code class="docutils literal notranslate"><span class="pre">pisa_read</span></code> and <code class="docutils literal notranslate"><span class="pre">pisa_math</span></code>, we can visualise these two variables using a scatter plot.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>


<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">6</span><span class="p">,</span><span class="mi">6</span> <span class="p">))</span>


<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;whitegrid&#39;</span><span class="p">,</span> <span class="n">rc</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;legend.labelspacing&#39;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">})</span>

<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;pisa_read&#39;</span> <span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;pisa_math&#39;</span> <span class="p">,</span> 
                <span class="n">data</span> <span class="o">=</span> <span class="n">df_2018</span> <span class="p">,</span> <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;continent&#39;</span> <span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">100</span> <span class="p">)</span> 

<span class="c1">## The next few lines demonstrate the code tha</span>
<span class="c1"># can be used to annotate a plot. </span>
<span class="c1"># You can place text on the plot using `plt.text()`</span>
<span class="c1"># The code below only labels the dot that represents the Netherlands</span>

<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Netherlands&#39;</span>
<span class="n">nl</span> <span class="o">=</span> <span class="n">df_2018</span><span class="p">[</span> <span class="n">df_2018</span><span class="p">[</span><span class="s1">&#39;location_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">country</span> <span class="p">]</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span> <span class="nb">int</span> <span class="p">(</span> <span class="n">nl</span><span class="p">[</span><span class="s1">&#39;pisa_read&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="nb">int</span> <span class="p">(</span> <span class="n">nl</span><span class="p">[</span><span class="s1">&#39;pisa_math&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="o">+</span><span class="mi">3</span> <span class="p">,</span> <span class="n">country</span> <span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;14&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span> <span class="p">)</span>

        
<span class="c1"># this next line makes sure that the legend is shown outside of the graph</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">borderaxespad</span><span class="o">=</span><span class="mf">0.</span><span class="p">);</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;scatter.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The code below creates a new data frame, based on the original data frame that was created out of the original CSV file. It firstly select the rows in which the <code class="docutils literal notranslate"><span class="pre">subject</span></code> column either has ‘BOY’ or ‘GIRL’ as a value. The second line selects the scores for the Netherlands.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_nl</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;subject&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span> <span class="p">[</span><span class="s1">&#39;BOY&#39;</span><span class="p">,</span><span class="s1">&#39;GIRL&#39;</span><span class="p">]</span>  <span class="p">)</span> <span class="p">]</span>
<span class="n">df_nl</span> <span class="o">=</span> <span class="n">df_nl</span><span class="p">[</span> <span class="n">df_nl</span><span class="p">[</span><span class="s1">&#39;location_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Netherlands&#39;</span> <span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>The newly created dataframe <code class="docutils literal notranslate"><span class="pre">df_nl</span></code> now contains all the values for Dutch boys and girls, measured in between 2000 and 2018. These values can be plotted as a line chart, using the <code class="docutils literal notranslate"><span class="pre">lineplot()</span></code> method in <code class="docutils literal notranslate"><span class="pre">Seaborn</span></code>. When you add a parameter named <code class="docutils literal notranslate"><span class="pre">hue</span></code>, pointing to one of the variables in the dataframe, different lines will be drawn for all the unique values in this particular column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">6</span><span class="p">,</span><span class="mi">4</span> <span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>



<span class="n">df_nl</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;location_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Netherlands&#39;</span> <span class="p">]</span>



<span class="c1">#plt.style.use(&#39;seaborn-whitegrid&#39;)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="n">df_nl</span> <span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;year&#39;</span> <span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;pisa_math&#39;</span> <span class="p">,</span>  <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;subject&#39;</span> <span class="p">,</span> <span class="n">palette</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;#078217&#39;</span> <span class="p">,</span> <span class="s1">&#39;#f5ce4e&#39;</span> <span class="p">,</span> <span class="s1">&#39;#3242a8&#39;</span><span class="p">]</span> <span class="p">,</span>  <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;whitegrid&#39;</span><span class="p">,</span> <span class="n">rc</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;legend.labelspacing&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="c1"># this next line makes sure that the legend is shown outside of the graph</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">borderaxespad</span><span class="o">=</span><span class="mf">0.</span><span class="p">);</span>


<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Years&#39;</span> <span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">16</span> <span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Scores for reading performance&#39;</span> <span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">16</span> <span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span> <span class="s1">&#39;PISA scores in the Netherlands&#39;</span> <span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">28</span> <span class="p">)</span>


<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;math.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>A box plot can be created using the <code class="docutils literal notranslate"><span class="pre">boxplot()</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline

<span class="n">colours</span> <span class="o">=</span> <span class="p">[</span>  <span class="s1">&#39;#a88732&#39;</span> <span class="p">,</span>  <span class="s1">&#39;#265c28&#39;</span> <span class="p">,</span> <span class="s1">&#39;#a0061a&#39;</span> <span class="p">,</span>  <span class="s1">&#39;#431670&#39;</span> <span class="p">]</span>

<span class="n">countries</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;Netherlands&#39;</span><span class="p">,</span> <span class="s1">&#39;France&#39;</span> <span class="p">,</span> <span class="s1">&#39;Germany&#39;</span> <span class="p">,</span> <span class="s1">&#39;Belgium&#39;</span><span class="p">,</span> <span class="s1">&#39;Luxembourg&#39;</span><span class="p">]</span>
<span class="n">df_countries</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;location_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">countries</span><span class="p">)</span> <span class="p">]</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span> <span class="n">df_countries</span> <span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;location_name&#39;</span> <span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;pisa_math&#39;</span> <span class="p">,</span> <span class="n">palette</span> <span class="o">=</span> <span class="n">colours</span>  <span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "cdsleiden/python-tutorial",
            ref: "gh-pages",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks/Solutions"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="11%20Pandas.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">11. Pandas</p>
        </div>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Peter Verhaar and Ben Companjen<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>